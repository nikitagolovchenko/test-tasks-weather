(this["webpackJsonptest-tasks-weather"]=this["webpackJsonptest-tasks-weather"]||[]).push([[0],{130:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(9),o=a.n(i),s=a(19),j=a(73),l=a(174),O=a(159),d=a(4),b=function(e){return e.loading?Object(d.jsx)(l.a,{position:"absolute",top:"0",left:"0",width:"100%",zIndex:"modal",children:Object(d.jsx)(O.a,{color:"secondary"})}):null},u=a(164),p=a(165),h=a(161),m=a(162),x=a(163),f=a(57),E=a.n(f),g=function(){return Object(d.jsx)(h.a,{position:"static",children:Object(d.jsxs)(m.a,{children:[Object(d.jsx)(x.a,{variant:"h6",children:"React Weather App"}),Object(d.jsxs)(l.a,{ml:"auto",children:[E()().format("dddd")," - ",E()().format("MMM Do YY")]})]})})},y=function(e){var t=e.children;return Object(d.jsxs)(l.a,{position:"relative",width:"100%",overflow:"hidden",children:[Object(d.jsx)(u.a,{}),Object(d.jsx)(g,{}),Object(d.jsx)(l.a,{component:"main",py:2,children:Object(d.jsx)(p.a,{maxWidth:"md",children:Object(d.jsx)(d.Fragment,{children:t})})})]})},R=a(31),v=a.n(R),C=a(52),S=a(58),w=a.n(S);!function(e){e.WEATHER_LOADING="WEATHER_LOADING",e.WEATHER_ERROR="WEATHER_ERROR",e.GEOLOCATION_SUCCESS="GEOLOCATION_SUCCESS",e.GEOLOCATION_ERROR="GEOLOCATION_ERROR",e.CITIES_SUCCESS="CITIES_SUCCESS",e.CITIES_DELETE="CITIES_DELETE",e.REMOVE_ERROR="REMOVE_ERROR"}(n||(n={}));var I=function(e){return{type:n.WEATHER_LOADING,payload:e}},T=function(e){return{type:n.WEATHER_ERROR,payload:e}},_=a(11),A=a(171),N=a(175),L=a(51),M=a(166),G=a(167),k=a(168),W=a(169),D=a(82),H=a(177),U=a(170),B=a(78),V=a.n(B),Y=Object(M.a)((function(e){return{card:{position:"relative"},cardMenu:{position:"absolute",top:e.spacing(2),right:e.spacing(0)}}})),z=function(e){var t=c.a.useState(null),a=Object(L.a)(t,2),n=a[0],r=a[1],i=Boolean(n),o=Y();return Object(d.jsx)(G.a,{className:o.card,children:Object(d.jsxs)(k.a,{children:[!e.primaryMain&&Object(d.jsxs)(l.a,{className:o.cardMenu,children:[Object(d.jsx)(W.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},children:Object(d.jsx)(V.a,{})}),Object(d.jsx)(D.a,{id:"long-menu",anchorEl:n,keepMounted:!0,open:i,onClose:function(){r(null)},children:Object(d.jsx)(H.a,{onClick:function(){e.deleteCard&&e.deleteCard(e.id),r(null)},children:"delete"})})]}),Object(d.jsxs)(l.a,{display:"flex",alignItems:"center",children:[Object(d.jsx)(l.a,{flexShrink:"0",children:Object(d.jsxs)(x.a,{variant:e.primaryMain?"h4":"h5",color:e.primaryMain?"primary":"textPrimary",noWrap:!0,children:[e.name," - ",e.sys.country]})}),Object(d.jsxs)(l.a,{ml:2,display:"flex",alignItems:"center",children:[Object(d.jsx)("img",{src:"".concat("https://openweathermap.org/img/wn","/").concat(e.weather[0].icon,".png"),alt:e.weather[0].description}),Object(d.jsx)(x.a,{children:e.weather[0].description})]})]}),Object(d.jsxs)(U.a,{container:!0,children:[Object(d.jsxs)(U.a,{item:!0,xs:6,children:[Object(d.jsx)(x.a,{variant:e.primaryMain?"h5":"h6",children:"Temp"}),Object(d.jsxs)(x.a,{children:["temp: ",Object(d.jsx)("strong",{children:e.main.temp})," \u2103"]}),Object(d.jsxs)(x.a,{children:["temp-min: ",Object(d.jsx)("strong",{children:e.main.temp_min})," \u2103"]}),Object(d.jsxs)(x.a,{children:["temp-max: ",Object(d.jsx)("strong",{children:e.main.temp_max})," \u2103"]})]}),Object(d.jsxs)(U.a,{item:!0,xs:6,children:[Object(d.jsx)(x.a,{variant:"h5",children:"Wind"}),Object(d.jsxs)(x.a,{children:["wind speed: ",Object(d.jsx)("strong",{children:e.wind.speed})," m/s"]})]})]})]})})},F=function(){var e=Object(s.c)((function(e){return e.weather}));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(l.a,{mb:3,children:[e.geolocation.error&&Object(d.jsx)(N.a,{severity:"info",children:e.geolocation.error}),e.geolocation.weather&&Object(d.jsx)(z,Object(_.a)(Object(_.a)({},e.geolocation.weather),{},{primaryMain:!0}))]}),Object(d.jsx)(l.a,{mb:3,children:Object(d.jsx)(A.a,{})})]})},J=a(173),P=a(172),q=Object(M.a)((function(e){return{form:{marginBottom:e.spacing(3)},formGroup:{display:"flex",alignItems:"center"},formBtn:{height:"100%",minHeight:"100%",marginLeft:e.spacing(2)},formInput:{flexGrow:1}}})),K=function(){var e=q(),t=Object(s.b)(),a=Object(r.useState)(""),c=Object(L.a)(a,2),i=c[0],o=c[1];return Object(d.jsx)("form",{className:e.form,onSubmit:function(e){e.preventDefault(),i&&(t(function(e){return function(){var t=Object(C.a)(v.a.mark((function t(a,r){var c,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(I(!0)),t.prev=1,t.next=4,w.a.get("".concat("https://api.openweathermap.org/data/2.5/weather","?q=").concat(e,"&appid=").concat("325f28b3f6d7ea8ede33cbad8cbf0a57","&units=metric"));case 4:c=t.sent,i=c.data,a({type:n.CITIES_SUCCESS,payload:i}),a(I(!1)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),a(T(t.t0.message)),a(I(!1));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(i.trim())),o(""))},children:Object(d.jsxs)(l.a,{className:e.formGroup,children:[Object(d.jsx)(J.a,{label:"Add city",variant:"outlined",className:e.formInput,value:i,onChange:function(e){o(e.target.value)}}),Object(d.jsx)(P.a,{className:e.formBtn,type:"submit",variant:"contained",size:"large",color:"primary",children:"Search"})]})})},Q=a(176),X=function(){var e=Object(s.c)((function(e){return e.weather})),t=Object(s.b)(),a=function(e){t(function(e){return{type:n.CITIES_DELETE,payload:e}}(e))};return Object(d.jsxs)(l.a,{mb:3,children:[!e.cities&&Object(d.jsx)(N.a,{severity:"info",children:"You don't have cities"}),e.cities&&Object(d.jsx)(U.a,{container:!0,spacing:2,children:e.cities.map((function(e,t){return Object(r.createElement)(Q.a,Object(_.a)(Object(_.a)({in:!0,style:{transformOrigin:"0 0 0"}},{timeout:1e3+300*t}),{},{key:t}),Object(d.jsx)(U.a,{item:!0,xs:6,children:Object(d.jsx)(z,Object(_.a)(Object(_.a)({},e),{},{deleteCard:a}))}))}))})]})},Z=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.weather}));return Object(r.useEffect)((function(){e({type:n.REMOVE_ERROR}),e(function(){var e=Object(C.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(I(!0));try{navigator.geolocation.getCurrentPosition(function(){var e=Object(C.a)(v.a.mark((function e(a){var r,c,i,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.coords,c=r.latitude,i=r.longitude,e.next=3,w.a.get("".concat("https://api.openweathermap.org/data/2.5/weather","?lat=").concat(c,"&lon=").concat(i,"&appid=").concat("325f28b3f6d7ea8ede33cbad8cbf0a57","&units=metric"));case 3:o=e.sent,s=o.data,t({type:n.GEOLOCATION_SUCCESS,payload:s}),t(I(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){t({type:n.GEOLOCATION_ERROR,payload:e.message}),t(I(!1))}))}catch(a){t(T(a.message)),t(I(!1))}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),[]),Object(d.jsxs)(y,{children:[Object(d.jsx)(b,{loading:t.loading}),Object(d.jsx)(F,{}),Object(d.jsx)(K,{}),t.error&&Object(d.jsx)(N.a,{severity:"error",children:t.error}),Object(d.jsx)(X,{})]})},$=a(17),ee=a(79),te=a(80),ae=a(83),ne={loading:!1,error:"",geolocation:{weather:null,error:""},cities:[]},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.WEATHER_ERROR:return Object(_.a)(Object(_.a)({},e),{},{error:t.payload});case n.WEATHER_LOADING:return Object(_.a)(Object(_.a)({},e),{},{loading:t.payload});case n.GEOLOCATION_ERROR:return Object(_.a)(Object(_.a)({},e),{},{geolocation:{weather:null,error:t.payload}});case n.GEOLOCATION_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{geolocation:{weather:t.payload,error:""}});case n.CITIES_SUCCESS:var a=e.cities?e.cities.find((function(e){return e.id===t.payload.id})):[];return a?Object(_.a)(Object(_.a)({},e),{},{error:""}):Object(_.a)(Object(_.a)({},e),{},{cities:[].concat(Object(ae.a)(e.cities),[t.payload]),error:""});case n.CITIES_DELETE:return Object(_.a)(Object(_.a)({},e),{},{cities:e.cities.filter((function(e){return e.id!==t.payload}))});case n.REMOVE_ERROR:return Object(_.a)(Object(_.a)({},e),{},{error:""});default:return e}},ce=Object($.combineReducers)({weather:re}),ie=a(59),oe=a(81),se={key:"root",storage:a.n(oe).a},je=Object(ie.a)(se,ce),le=Object($.createStore)(je,Object(ee.composeWithDevTools)(Object($.applyMiddleware)(te.a))),Oe=Object(ie.b)(le);o.a.render(Object(d.jsx)(s.a,{store:le,children:Object(d.jsx)(j.a,{persistor:Oe,children:Object(d.jsx)(Z,{})})}),document.getElementById("root"))}},[[130,1,2]]]);
//# sourceMappingURL=main.f69cef63.chunk.js.map